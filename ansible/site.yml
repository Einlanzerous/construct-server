---
- name: Apply Common Configuration
  hosts: all
  become: true
  roles:
    - common

- name: Configure Server
  hosts: server
  become: true
  roles:
    - server

- name: Configure Desktop
  hosts: desktop
  become: true
  roles:
    - desktop
  
  # Handlers must be reachable by the play that notifies them. 
  # Since server role notifies 'Restart Docker', we should ensure handlers are available.
  # The simple way is to define them in the roles, which we did. 
  # Ansible handles role dependencies naturally.
